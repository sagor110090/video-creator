import{x as T,r as h,o as j,c as r,a,b as v,u as D,h as A,w as b,d as e,F as w,i as E,t as c,n as M,l as u,m as g}from"./app-OAIXZfUj.js";import{A as $}from"./AppLayout-DgAo-hbn.js";import{S as k}from"./sweetalert2.esm.all-BQxta0Da.js";const R={key:0,class:"flex justify-center py-20"},S={key:1,class:"text-center py-20 bg-white dark:bg-slate-900 rounded-2xl border border-slate-200 dark:border-slate-800"},Y={key:2,class:"grid grid-cols-1 md:grid-cols-2 gap-6 theme-scrollbar"},L={class:"p-6"},H={class:"flex items-start justify-between mb-4"},V={class:"flex items-center space-x-4"},F=["src","alt"],z={class:"text-lg font-bold text-slate-900 dark:text-white"},N={class:"text-sm text-slate-500 dark:text-slate-400 font-mono"},q={class:"space-y-3"},G={class:"flex items-center justify-between text-sm"},I={class:"flex items-center justify-between text-sm"},J={class:"font-bold text-slate-900 dark:text-white"},K={class:"flex items-center justify-between text-sm"},O={class:"font-bold text-slate-900 dark:text-white"},P={class:"px-6 py-3 bg-slate-50 dark:bg-slate-800/50 border-t border-slate-200 dark:border-slate-800"},Q={class:"flex items-center justify-between gap-2"},U=["onClick"],W=["onClick"],X=["onClick"],se={__name:"YouTubeChannels",setup(Z){const l=T.useToast(),f=h([]),i=h(!1),n=h(document.documentElement.classList.contains("dark")),x=async()=>{i.value=!0;try{const s=await g.get("/api/youtube/channels");f.value=s.data}catch(s){console.error("Error fetching channels:",s),l.error("Failed to load channels")}finally{i.value=!1}},m=()=>{window.location.href="/youtube/auth"},y=async s=>{(await k.fire({title:"Reconnect Channel?",text:`You will be redirected to YouTube to re-authenticate the channel "${s.channel_title}"`,icon:"question",showCancelButton:!0,confirmButtonColor:"#6366f1",cancelButtonColor:"#64748b",confirmButtonText:"Reconnect",cancelButtonText:"Cancel",background:n.value?"#0f172a":"#ffffff",color:n.value?"#f8fafc":"#0f172a"})).isConfirmed&&(window.location.href=`/youtube/reconnect/${s.id}`)},C=async s=>{if((await k.fire({title:"Refresh Token?",text:`This will attempt to refresh the access token for "${s.channel_title}"`,icon:"question",showCancelButton:!0,confirmButtonColor:"#6366f1",cancelButtonColor:"#64748b",confirmButtonText:"Refresh",cancelButtonText:"Cancel",background:n.value?"#0f172a":"#ffffff",color:n.value?"#f8fafc":"#0f172a"})).isConfirmed)try{i.value=!0;const o=await g.post(`/api/youtube/refresh/${s.id}`);l.success("Token refreshed successfully"),await x()}catch(o){console.error("Error refreshing token:",o),l.error(o.response?.data?.error||"Failed to refresh token")}finally{i.value=!1}},_=async s=>{if((await k.fire({title:"Disconnect Channel?",text:`Are you sure you want to disconnect "${s.channel_title}"? This action cannot be undone.`,icon:"warning",showCancelButton:!0,confirmButtonColor:"#ef4444",cancelButtonColor:"#64748b",confirmButtonText:"Disconnect",cancelButtonText:"Cancel",background:n.value?"#0f172a":"#ffffff",color:n.value?"#f8fafc":"#0f172a"})).isConfirmed)try{await g.delete(`/api/youtube/channels/${s.id}`),l.success("Channel disconnected successfully"),await x()}catch(o){console.error("Error disconnecting channel:",o),l.error("Failed to disconnect channel")}},B=s=>s||"/img/youtube-placeholder.svg",p=s=>{const d=(new Date(s.expires_at)-new Date)/(1e3*60*60);return d<0?{text:"Expired",color:"text-red-600 bg-red-100 dark:bg-red-900/30 dark:text-red-400"}:d<24?{text:"Expiring Soon",color:"text-yellow-600 bg-yellow-100 dark:bg-yellow-900/30 dark:text-yellow-400"}:{text:"Active",color:"text-green-600 bg-green-100 dark:bg-green-900/30 dark:text-green-400"}};return j(()=>{x()}),(s,t)=>(a(),r(w,null,[v(D(A),{title:"YouTube Channels"}),v($,null,{header:b(()=>[...t[0]||(t[0]=[u(" YouTube Channels ",-1)])]),actions:b(()=>[e("button",{onClick:m,class:"px-4 py-2 bg-indigo-600 hover:bg-indigo-700 text-white font-bold rounded-lg transition-all shadow-sm flex items-center gap-2 text-sm"},[...t[1]||(t[1]=[e("svg",{class:"w-4 h-4",fill:"currentColor",viewBox:"0 0 24 24"},[e("path",{d:"M23.498 6.186a3.016 3.016 0 0 0-2.122-2.136C19.505 3.545 12 3.545 12 3.545s-7.505 0-9.377.505A3.017 3.017 0 0 0 .502 6.186C0 8.07 0 12 0 12s0 3.93.502 5.814a3.016 3.016 0 0 0 2.122 2.136c1.871.505 9.376.505 9.376.505s7.505 0 9.377-.505a3.015 3.015 0 0 0 2.122-2.136C24 15.93 24 12 24 12s0-3.93-.502-5.814zM9.545 15.568V8.432L15.818 12l-6.273 3.568z"})],-1),u(" Connect Channel ",-1)])])]),default:b(()=>[t[12]||(t[12]=e("div",{class:"mb-8"},[e("h1",{class:"text-3xl font-bold text-slate-900 dark:text-white mb-2"},"Connected YouTube Channels"),e("p",{class:"text-slate-600 dark:text-slate-400"},"Manage your YouTube channel connections and access tokens")],-1)),i.value?(a(),r("div",R,[...t[2]||(t[2]=[e("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600"},null,-1)])])):f.value.length===0?(a(),r("div",S,[t[3]||(t[3]=e("svg",{class:"w-16 h-16 mx-auto text-slate-300 dark:text-slate-600 mb-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z"})],-1)),t[4]||(t[4]=e("h3",{class:"text-lg font-bold text-slate-700 dark:text-slate-300 mb-2"},"No channels connected",-1)),t[5]||(t[5]=e("p",{class:"text-slate-500 dark:text-slate-400 mb-4"},"Connect your YouTube channel to start uploading videos",-1)),e("button",{onClick:m,class:"px-6 py-2 bg-indigo-600 hover:bg-indigo-700 text-white font-bold rounded-lg"},"Connect Channel")])):(a(),r("div",Y,[(a(!0),r(w,null,E(f.value,o=>(a(),r("div",{key:o.id,class:"bg-white dark:bg-slate-900 rounded-2xl shadow-sm border border-slate-200 dark:border-slate-800 overflow-hidden"},[e("div",L,[e("div",H,[e("div",V,[e("img",{src:B(o.channel_thumbnail),alt:o.channel_title,class:"w-14 h-14 rounded-full object-cover ring-2 ring-slate-200 dark:ring-slate-700",onerror:"this.src='/img/youtube-placeholder.svg'"},null,8,F),e("div",null,[e("h3",z,c(o.channel_title),1),e("p",N,c(o.channel_id),1)])])]),e("div",q,[e("div",G,[t[6]||(t[6]=e("span",{class:"text-slate-600 dark:text-slate-400"},"Status",-1)),e("span",{class:M(["px-2 py-1 rounded-full text-xs font-bold",p(o)])},c(p(o).text),3)]),e("div",I,[t[7]||(t[7]=e("span",{class:"text-slate-600 dark:text-slate-400"},"Expires",-1)),e("span",J,c(new Date(o.expires_at).toLocaleDateString()),1)]),e("div",K,[t[8]||(t[8]=e("span",{class:"text-slate-600 dark:text-slate-400"},"Connected",-1)),e("span",O,c(new Date(o.created_at).toLocaleDateString()),1)])])]),e("div",P,[e("div",Q,[e("button",{onClick:d=>C(o),class:"flex-1 inline-flex items-center justify-center px-3 py-2 text-sm font-medium text-slate-700 dark:text-slate-300 bg-slate-200 dark:bg-slate-700 hover:bg-indigo-100 dark:hover:bg-indigo-900/30 hover:text-indigo-600 dark:hover:text-indigo-400 rounded-lg transition-colors"},[...t[9]||(t[9]=[e("svg",{class:"w-4 h-4 mr-1.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})],-1),u(" Refresh ",-1)])],8,U),e("button",{onClick:d=>y(o),class:"flex-1 inline-flex items-center justify-center px-3 py-2 text-sm font-medium text-slate-700 dark:text-slate-300 bg-slate-200 dark:bg-slate-700 hover:bg-indigo-100 dark:hover:bg-indigo-900/30 hover:text-indigo-600 dark:hover:text-indigo-400 rounded-lg transition-colors"},[...t[10]||(t[10]=[e("svg",{class:"w-4 h-4 mr-1.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"})],-1),u(" Reconnect ",-1)])],8,W),e("button",{onClick:d=>_(o),class:"flex-1 inline-flex items-center justify-center px-3 py-2 text-sm font-medium text-slate-700 dark:text-slate-300 bg-slate-200 dark:bg-slate-700 hover:bg-red-100 dark:hover:bg-red-900/30 hover:text-red-600 dark:hover:text-red-400 rounded-lg transition-colors"},[...t[11]||(t[11]=[e("svg",{class:"w-4 h-4 mr-1.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})],-1),u(" Disconnect ",-1)])],8,X)])])]))),128))]))]),_:1})],64))}};export{se as default};
